<!DOCTYPE html>

<!--
  Website of the iQAS platform
    Antoine AUGER
    ISAE-SUPAERO, Toulouse
    2017
-->

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Website of the iQAS platform.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>iQAS platform</title>

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="/figures/iqas_logo_favicon.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">
    <link rel="apple-touch-icon-precomposed" href="/figures/iqas_logo_favicon.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="/figures/iqas_logo_favicon.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <link rel="shortcut icon" href="/figures/iqas_logo_favicon.png">

    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue_grey-red.min.css">
    <link rel="stylesheet" type="text/css" href="/css/mdl-selectfield.min.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/style_config.css">
</head>

<body>
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
    <header class="mdl-navigation mdl-layout__header is-casting-shadow">
        <div class="mdl-layout__header-row">
            <span class="mdl-layout-title">Configuration</span>
        </div>
        <div class="mdl-layout__tab-bar">
            <a href="#scroll-tab-1" class="mdl-layout__tab is-active">Platform</a>
            <a href="#scroll-tab-2" class="mdl-layout__tab">Sensors</a>
            <a href="#scroll-tab-3" class="mdl-layout__tab">QoO Pipelines</a>
        </div>

        <a href="#" id="text_status_iqas" title="iQAS platform is currently running">
            <img id="iqas_status_icon_ok" src="/figures/iqas_status_ok.png">
            <img id="iqas_status_icon_nok" src="/figures/iqas_status_nok.png">
        </a>

    </header>

    <div class="mdl-layout__drawer">

        <header class="logo-drawer-header">
            <a href="/"><img src="/figures/iqas_logo.png"></a>
        </header>

        <nav class="mdl-navigation">
            <a class="mdl-navigation__link" href="/">
                <i class="material-icons">home</i> Home
            </a>
            <a class="mdl-navigation__link" href="/newRequest">
                <i class="material-icons">content_paste</i> New request
            </a>
            <a class="mdl-navigation__link" href="/api">
                <i class="material-icons">info</i> API endpoints
            </a>
            <a class="mdl-navigation__link active-link" href="#">
                <i class="material-icons">mode_edit</i> Configuration
            </a>
            <a class="mdl-navigation__link" href="#">
                <i class="material-icons">people</i> About
            </a>
            <div class="mdl-layout-spacer"></div>
        </nav>
    </div> <!-- mdl-layout__drawer -->

    <main class="mdl-layout__content">

        <section class="mdl-layout__tab-panel is-active" id="scroll-tab-1">
            <div class="page-content">

                <div class="mdl-grid">

                    <div class="mdl-cell mdl-cell--12-col center-card">
                        <div class="mdl-card mdl-shadow--2dp">
                            <div class="mdl-card__supporting-text important-note">
                                To modify following parameters, you have to manually edit iQAS configuration files and
                                then restart the platform for the changes to take effect.
                            </div>
                        </div>
                    </div> <!-- mdl-cell -->

                    <div class="mdl-cell mdl-cell--12-col center-card">
                        <div class="mdl-card mdl-shadow--2dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">iQAS configuration</h2>
                            </div>
                            <div class="mdl-card__supporting-text no_top_padding">
                                <pre id="iqas-config"></pre>
                            </div>
                        </div>
                    </div> <!-- mdl-cell -->

                    <div class="mdl-cell mdl-cell--12-col center-card">
                        <div class="mdl-card mdl-shadow--2dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">Ontology imports</h2>
                            </div>
                            <div class="mdl-card__supporting-text no_top_padding">
                                <pre id="onto-config"></pre>
                            </div>
                        </div>
                    </div> <!-- mdl-cell -->

                </div> <!-- mdl-mdl-grid -->

            </div>
        </section>

        <section class="mdl-layout__tab-panel" id="scroll-tab-2">
            <div class="page-content">

                <div class="mdl-grid">

                    <div class="mdl-cell mdl-cell--12-col center-card">
                        <div id="sensors_card" class="mdl-card mdl-shadow--2dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">Registered Sensors</h2>
                            </div>
                            <div class="mdl-card__supporting-text no_top_padding">
                                <table class="mdl-data-table mdl-js-data-table">
                                    <thead>
                                    <tr>
                                        <th class="mdl-data-table__cell--non-numeric">Sensor ID</th>
                                        <th class="mdl-data-table__cell--non-numeric">Topic</th>
                                        <th class="mdl-data-table__cell--non-numeric">Unit</th>
                                        <th class="mdl-data-table__cell--non-numeric">Location</th>
                                        <th class="mdl-data-table__cell--non-numeric"></th>
                                    </tr>
                                    </thead>
                                    <tbody id="table_sensors_rows">
                                    <!-- Here goes the retrieved Sensors -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div> <!-- mdl-cell -->

                    <div class="mdl-cell mdl-cell--12-col center-card" id="postSensor">

                        <div class="form-card-wide mdl-card mdl-shadow--2dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">Add new Sensor</h2>
                            </div>
                            <div class="mdl-card__supporting-text no_top_padding">
                                <div id="div_form">
                                    <form id="submit_sensor_form" action="#">
                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width">
                                            <input class="mdl-textfield__input" type="text" pattern="[a-zA-Z0-9]+" id="sensor_id" name="sensor_id">
                                            <label class="mdl-textfield__label" for="sensor_id">Sensor ID</label>
                                            <span class="mdl-textfield__error">Sensor ID should only contain letters and numbers!</span>
                                        </div>

                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width">
                                            <input class="mdl-textfield__input" type="text" id="sensor_type" name="@type" value="ssn:Sensor" disabled>
                                            <label class="mdl-textfield__label" for="sensor_type">Sensor ID</label>
                                        </div>

                                        <div class="mdl-selectfield mdl-js-selectfield mdl-selectfield--floating-label full-width">
                                            <select class="mdl-selectfield__select" id="location" name="location">
                                                <option value="qoo:loc_portet">qoo:loc_portet</option>
                                                <option value="qoo:loc_jardin">qoo:loc_jardin</option>
                                            </select>
                                            <label class="mdl-selectfield__label" for="location">Location</label>
                                        </div>

                                        <div class="mdl-selectfield mdl-js-selectfield mdl-selectfield--floating-label full-width">
                                            <select class="mdl-selectfield__select" id="topic" name="topic">
                                                <option value="qoo:temperature">qoo:temperature</option>
                                                <option value="qoo:visibility">qoo:visibility</option>
                                            </select>
                                            <label class="mdl-selectfield__label" for="topic">Topic</label>
                                        </div>

                                        <div class="mdl-selectfield mdl-js-selectfield mdl-selectfield--floating-label full-width">
                                            <select class="mdl-selectfield__select" id="quantityKind" name="quantityKind">
                                                <option value="m3-lite:Temperature">m3-lite:Temperature</option>
                                                <option value="m3-lite:Visibility">m3-lite:Visibility</option>
                                            </select>
                                            <label class="mdl-selectfield__label" for="quantityKind">Quantity Kind</label>
                                        </div>

                                        <div class="mdl-selectfield mdl-js-selectfield mdl-selectfield--floating-label full-width">
                                            <select class="mdl-selectfield__select" id="unit" name="unit">
                                                <option value="m3-lite:DegreeCelsius">m3-lite:DegreeCelsius</option>
                                                <option value="3-lite:DegreeFahrenheit">m3-lite:DegreeFahrenheit</option>
                                                <option value="m3-lite:Kelvin">m3-lite:Kelvin</option>
                                                <option value="3-lite:Metre">m3-lite:Metre</option>
                                            </select>
                                            <label class="mdl-selectfield__label" for="unit">Unit</label>
                                        </div>

                                        <div class="mdl-selectfield mdl-js-selectfield mdl-selectfield--floating-label full-width">
                                            <select class="mdl-selectfield__select" id="interfaceType" name="interfaceType">
                                                <option value="REST">REST</option>
                                            </select>
                                            <label class="mdl-selectfield__label" for="interfaceType">Endpoint type</label>
                                        </div>

                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width">
                                            <input class="mdl-textfield__input" type="text" pattern="[+-INF.0-9]+" id="minValue" name="minValue">
                                            <label class="mdl-textfield__label" for="minValue">Min Value</label>
                                            <span class="mdl-textfield__error">Invalid minimum value!</span>
                                        </div>

                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width">
                                            <input class="mdl-textfield__input" type="text" pattern="[+-INF.0-9]+" id="maxValue" name="maxValue">
                                            <label class="mdl-textfield__label" for="maxValue">Max Value</label>
                                            <span class="mdl-textfield__error">Invalid maximum value!</span>
                                        </div>

                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width">
                                            <input class="mdl-textfield__input" type="text" pattern="http://[a-zA-Z0-9]+" id="endpoint" name="endpoint">
                                            <label class="mdl-textfield__label" for="sensor_id">Endpoint URL</label>
                                            <span class="mdl-textfield__error">Valid URL should start with 'http://'</span>
                                        </div>

                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width" style="margin-top:20px; padding: 20px 0;">
                                            <textarea class="mdl-textfield__input" type="text" rows= "5" id="interfaceDescription" name="interfaceDescription"></textarea>
                                            <label class="mdl-textfield__label" for="interfaceDescription">Endpoint description</label>
                                        </div>

                                    </form>
                                </div>

                                <div id="info_form">
                                    <span id="info_form_location" style="top: 155px; position: relative; display: none;">
                                        Not what you are looking for? Please contact an iQAS administrator.<br/>
                                    </span>

                                    <span id="info_form_topic" style="top: 220px; position: relative; display: none;">
                                        Not what you are looking for? Please contact an iQAS administrator.<br/>
                                    </span>

                                    <span id="info_form_quantityKind" style="top: 300px; position: relative; display: none;">
                                        Not what you are looking for? Please contact an iQAS administrator.<br/>
                                    </span>

                                    <span id="info_form_unit" style="top: 366px; position: relative; display: none;">
                                        Not what you are looking for? Please contact an iQAS administrator.<br/>
                                    </span>

                                    <span id="info_form_interfaceType" style="top: 440px; position: relative; display: none;">
                                        Not what you are looking for? Please contact an iQAS administrator.<br/>
                                    </span>

                                    <span id="info_form_minValue" style="top: 506px; position: relative; display: none;">
                                        Allowed values: -INF, +INF or a number.<br/>
                                    </span>

                                    <span id="info_form_maxValue" style="top: 572px; position: relative; display: none;">
                                        Allowed values: -INF, +INF or a number.<br/>
                                    </span>
                                </div>

                            </div> <!-- mdl-card__supporting-text -->

                            <div class="mdl-card__actions mdl-card--border">
                                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="clearForm();">
                                    Reset
                                </a>
                                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="postNewSensor();">
                                    Submit
                                </a>
                            </div> <!-- mdl-card__actions -->

                        </div> <!-- mdl-card -->

                    </div> <!-- mdl-cell -->

                </div> <!-- mdl-mdl-grid -->

            </div>
        </section>

        <section class="mdl-layout__tab-panel" id="scroll-tab-3">
            <div class="page-content">

                <div class="mdl-grid">

                    <div class="mdl-cell mdl-cell--12-col center-card">
                        <div id="pipelines_card" class="mdl-card mdl-shadow--2dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">Registered QoO Pipelines</h2>
                            </div>
                            <div class="mdl-card__supporting-text no_top_padding">
                                <table class="mdl-data-table mdl-js-data-table">
                                    <thead>
                                    <tr>
                                        <th class="mdl-data-table__cell--non-numeric">Pipeline ID</th>
                                        <th class="mdl-data-table__cell--non-numeric">Name</th>
                                        <th class="mdl-data-table__cell--non-numeric">Adaptable</th>
                                        <th class="mdl-data-table__cell--non-numeric">Customizable parameters</th>
                                        <th class="mdl-data-table__cell--non-numeric"></th>
                                    </tr>
                                    </thead>
                                    <tbody id="table_pipelines_rows">
                                    <!-- Here goes the retrieved Sensors -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div> <!-- mdl-cell -->

                    <div class="mdl-cell mdl-cell--12-col center-card" id="postPipeline">

                        <div class="form-card-wide mdl-card mdl-shadow--2dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">Add new QoO Pipeline</h2>
                            </div>
                            <div class="mdl-card__supporting-text no_top_padding">
                                <div id="div_form2">
                                    <form id="submit_pipeline_form" action="#">

                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width">
                                            <textarea class="mdl-textfield__input" type="text" rows= "30" id="pipelineTextarea" name="pipelineTextarea"></textarea>
                                            <label class="mdl-textfield__label" for="pipelineTextarea">SPARQL request for the new QoO Pipeline</label>
                                        </div>

                                    </form>
                                </div>

                            </div> <!-- mdl-card__supporting-text -->

                            <div class="mdl-card__actions mdl-card--border">
                                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="loadPipelineTemplate();">
                                    Load template
                                </a>
                                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="clearForm2();">
                                    Reset
                                </a>
                                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="postNewPipeline();">
                                    Submit
                                </a>
                            </div> <!-- mdl-card__actions -->

                        </div> <!-- mdl-card -->

                    </div> <!-- mdl-cell -->

                </div> <!--mdl-grid -->

            </div> <!--page-content -->
        </section>

    </main> <!-- mdl-layout__content -->

</div> <!-- mdl-layout -->
<script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<script type="text/javascript" src="/js/mdl-selectfield.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script type="text/javascript" src="/js/script_common.js"></script>
<script type="text/javascript" src="/js/script_config.js"></script>
</body>
</html>
