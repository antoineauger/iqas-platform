<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>API gateway</title>
    <link rel="stylesheet" type="text/css" href="/style.css">
</head>
<body>

<div style="width: 80%; text-align: center; margin-left: auto; margin-right: auto">
    <img src="/iqas_logo.png" />
    <p> Welcome on the homepage of the API gateway for the iQAS platform. <br/>
        This API allows you to interact with the iQAS platform in order to subscribe to high-quality sensor observations.
    </p>
</div>

<h2>GET endpoints</h2>

<table class="border" width="80%" style="margin-left: auto; margin-right: auto">
    <tr>
        <th>Sensors</th>
        <th>Requests</th>
        <th>Places</th>
        <th>Topics</th>
        <th>Pipelines</th>
    </tr>
    <tr>
        <td width="15%">
            <ul>
                <li><a href="/sensors">/sensors</a></li>
                <li>/sensors/[sensor_id]</li>
            </ul>
        </td>
        <td width="15%">
            <ul>
                <li><a href="/requests">/requests</a></li>
                <li>/requests/[request_id]</li>
            </ul>
        </td>
        <td width="15%">
            <ul>
                <li><a href="/places">/places</a></li>
                <li>/places?nearTo=[location]</li>
            </ul>
        </td>
        <td width="15%">
            <ul>
                <li><a href="/topics">/topics</a></li>
                <li>/topics/[topic_id]</li>
            </ul>
        </td>
        <td width="15%">
            <ul>
                <li><a href="/pipelines">/pipelines</a></li>
                <li>/pipelines/[pipeline_id]</li>
                <li><a href="/pipelines?print=ids">/pipelines?print=ids</a></li>
            </ul>
        </td>
    </tr>
</table>

<h2>POST endpoints</h2>
<ul>
    <li>/requests</li>
</ul>

<h3>Request syntax</h3>

For submitting a new iQAS request, the format is the following (bold parameters are mandatory):
<table width="80%" style="margin-left: auto; margin-right: auto">
    <tr>
        <td width="40%">
            <div class="code">
                Content-Type: application/json<br/>
                {<br/>
                    <div style="margin-left: 30px;">
                        <b>"application_id"</b>: "[application_id]",<br/>
                        <b>"topic"</b>: "[topic]" / "ALL",<br/>
                        <b>"location"</b>: "[location]" / "ALL",<br/>
                        "obs_level": "RAW_DATA" / "INFORMATION" / "KNOWLEDGE", (default: RAW_DATA)<br/>
                        "qoo": {<br/>
                            <div style="margin-left: 30px;">
                                <b>"interested_in"</b>: [QoO_attributes_list],<br/>
                                "iqas_params": {<br/>
                                <div style="margin-left: 30px;">
                                    "[iqas_param_name]": "[iqas_param_value]",<br/>
                                    <div style="margin-left: 30px;">
                                        ...
                                    </div>
                                </div>
                                },<br/>
                                "custom_params": {<br/>
                                <div style="margin-left: 30px;">
                                    "[custom_param_name]": "[custom_param_value]",<br/>
                                    <div style="margin-left: 30px;">
                                        ...
                                    </div>
                                </div>
                                }<br/>
                                "sla_level": "BEST_EFFORT" / "GUARANTEED", (default: BEST_EFFORT)<br/>
                                <!-- "operator": "NONE" / "AVG" / "MIN" / "MAX" (default: NONE)<br/> -->
                            </div>
                        }
                </div>
                }
            </div>
        </td>

        <td width="40%">
            <script src="https://gist.github.com/antoineauger/7fad731f1340dbbecca731325e6c200d.js"></script>
        </td>
    </tr>

</table>

<br/>

When present, the <span class="code">qoo</span> parameter represents a "QoO Service Level Agreement" and should be expressed as follow:
<ul>
    <li><span class="code"><b>interested_in</b></span> contains an ordered list
        (first=very important, last=less important) of QoO attributes that matter for the given application.
        See <a href="/qoo/attributes">/qoo/attributes</a> for the current supported QoO attributes.</li>

    <li><span class="code">iqas_params</span> can be used to specify some additional QoO requirements
        that the iQAS platform natively supports.
        Visit <a href="/qoo/iqas_params">/qoo/iqas_params</a> for more details.</li>

    <li><span class="code">custom_params</span> can be used to specify additional QoO requirements
        that have been set as customizable for a custom QoO Pipeline.
        Visit <a href="/qoo/custom_params">/qoo/custom_params</a> to see what parameters can be customized.</li>
</ul>

<ul>
    <li>/sensors/update</li>
</ul>

An empty POST to this address forces the iQAS platform to refresh Context cache for sensors from Fuseki server.

<h2>DELETE endpoints</h2>
<ul>
    <li>/requests/[request_id]</li>
</ul>

<hr/><br/>

<div>
    <span style="font-weight: bold">Successfully loaded QoO pipelines:</span>
    <ul id="qoo_pipeline_list">
        <!-- Here goes the result of the jQuery request to display the successfully loaded QoO pipelines -->
    </ul>
</div>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script type="text/javascript" src="/script.js"></script>
</body>
</html>