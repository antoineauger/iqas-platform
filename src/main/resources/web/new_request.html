<!DOCTYPE html>

<!--
  Website of the iQAS platform
    Antoine AUGER
    ISAE-SUPAERO, Toulouse
    2017
-->

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Website of the iQAS platform.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>iQAS platform</title>

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="/figures/iqas_logo_favicon.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">
    <link rel="apple-touch-icon-precomposed" href="/figures/iqas_logo_favicon.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="/figures/iqas_logo_favicon.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <link rel="shortcut icon" href="/figures/iqas_logo_favicon.png">

    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue_grey-red.min.css">
    <link rel="stylesheet" type="text/css" href="/css/mdl-selectfield.min.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/style_new_request.css">
</head>

<body>
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
    <header class="mdl-navigation mdl-layout__header is-casting-shadow">
        <div class="mdl-layout__header-row">
            <div>
                <span class="mdl-layout-title">Submit new Request</span>
            </div>
        </div>

        <a href="#" id="text_status_iqas" title="iQAS platform is currently running">
            <img id="iqas_status_icon_ok" src="/figures/iqas_status_ok.png">
            <img id="iqas_status_icon_nok" src="/figures/iqas_status_nok.png">
        </a>

    </header>

    <div class="mdl-layout__drawer">

        <header class="logo-drawer-header">
            <a href="/"><img src="/figures/iqas_logo.png"></a>
        </header>

        <nav class="mdl-navigation">
            <a class="mdl-navigation__link" href="/">
                <i class="material-icons">home</i> Home
            </a>
            <a class="mdl-navigation__link active-link" href="#">
                <i class="material-icons">content_paste</i> New request
            </a>
            <a class="mdl-navigation__link" href="/api">
                <i class="material-icons">info</i> API endpoints
            </a>
            <a class="mdl-navigation__link" href="/configuration">
                <i class="material-icons">mode_edit</i> Configuration
            </a>
            <a class="mdl-navigation__link" href="#">
                <i class="material-icons">people</i> About
            </a>
            <div class="mdl-layout-spacer"></div>
        </nav>
    </div> <!-- mdl-layout__drawer -->

    <main class="mdl-layout__content">

        <div class="form-card-wide mdl-card mdl-shadow--2dp">
            <div class="mdl-card__title">
                <h2 class="mdl-card__title-text">Request details</h2>
            </div>

            <div class="mdl-card__supporting-text no_top_padding">
                <div id="div_form">
                    <form id="submit_request_form" action="#">
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width">
                            <input class="mdl-textfield__input" type="text" pattern="[a-zA-Z0-9]+" id="application_id" name="application_id">
                            <label class="mdl-textfield__label" for="application_id">Application ID</label>
                            <span class="mdl-textfield__error">ApplicationID should be only composed of letters or numbers!</span>
                        </div>

                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width">
                            <input class="mdl-textfield__input" type="text" pattern="[a-zA-Z]+" id="topic" name="topic">
                            <label class="mdl-textfield__label" for="topic">Topic</label>
                            <span class="mdl-textfield__error">Topic should be a word composed of letters only!</span>
                        </div>

                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width">
                            <input class="mdl-textfield__input" type="text" pattern="[a-zA-Z ]+" id="location" name="location">
                            <label class="mdl-textfield__label" for="location">Location</label>
                            <span class="mdl-textfield__error">Location cannot contain any number!</span>
                        </div>

                        <div class="mdl-selectfield mdl-js-selectfield mdl-selectfield--floating-label full-width">
                            <select class="mdl-selectfield__select" id="obs_level" name="obs_level">
                                <option value="RAW_DATA">RAW_DATA</option>
                                <option value="INFORMATION">INFORMATION</option>
                                <option value="KNOWLEDGE">KNOWLEDGE</option>
                            </select>
                            <label class="mdl-selectfield__label" for="obs_level">Observation level</label>
                        </div>

                        <div style="padding: 20px 0;">
                            <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect full-width" for="qoo_constraints">
                                <input type="checkbox" id="qoo_constraints" class="mdl-switch__input" onclick="showOrHideQoODiv();" name="qoo_constraints">
                                <span class="mdl-switch__label">QoO constraints</span>
                            </label>
                        </div>

                        <div id="div_qoo_constraints" style="padding: 20px 0; display: none">
                            <div class="mdl-selectfield mdl-js-selectfield mdl-selectfield--floating-label full-width">
                                <select class="mdl-selectfield__select" id="qoo-sla_level" name="qoo-sla_level">
                                    <option value="BEST_EFFORT">BEST_EFFORT</option>
                                    <option value="GUARANTEED">GUARANTEED</option>
                                </select>
                                <label class="mdl-selectfield__label" for="qoo-sla_level">Service Level Agreement</label>
                            </div>

                            <span style="font-size: 12px; color: rgb(96,125,139);">Interested in:</span>
                            <div id="interested_in_checkboxes" class="full-width">
                                <!-- Here goes the retrieved QoO attributes -->
                            </div>

                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width" style="margin-top:20px; padding: 20px 0;">
                                <textarea class="mdl-textfield__input" type="text" rows= "5" id="qoo-iqas_params" name="qoo-iqas_params"></textarea>
                                <label class="mdl-textfield__label" for="qoo-iqas_params">iQAS Params</label>
                            </div>

                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width" style="padding: 20px 0;">
                                <textarea class="mdl-textfield__input" type="text" rows= "5" id="qoo-custom_params" name="qoo-custom_params"></textarea>
                                <label class="mdl-textfield__label" for="qoo-custom_params">Custom Params</label>
                            </div>
                        </div>

                    </form>
                </div>

                <div id="info_form">
                    <span id="info_form_location" style="top: 155px; position: relative; display: none">
                        You may want to use the API endpoints section to retrieve known locations.
                    </span>
                    <span id="info_form_iqas_params" style="top: 550px; position: relative; display: none;">
                        JSON-formated parameters. For instance:<br/>
                        <span style="font-family: monospace;">{<br/>
                            <span style="margin-left: 15px">"obsRate_min": "2/min"</span><br/>
                            }</span><br/>
                        You may want to consult the Quality of Observation (QoO) section of the API documentation to know available iQAS parameters.
                    </span>
                    <span id="info_form_custom_params" style="top: 710px; position: relative; display: none;">
                        JSON-formated parameters. For instance:<br/>
                        <span style="font-family: monospace;">{<br/>
                        <span style="margin-left: 15px">"nb_copies": "2"</span><br/>
                            }</span><br/>
                        You may want to consult the Quality of Observation (QoO) section of the API documentation to know available custom parameters.
                    </span>
                </div>

            </div>

            <div class="mdl-card__actions mdl-card--border">
                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="clearForm();">
                    Reset
                </a>
                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="sendIqasRequest();">
                    Submit
                </a>
            </div> <!-- mdl-card__actions -->

        </div> <!-- form-card-wide -->

    </main> <!-- mdl-layout__content -->

</div> <!-- mdl-layout -->

<script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<script type="text/javascript" src="/js/mdl-selectfield.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script type="text/javascript" src="/js/script_common.js"></script>
<script type="text/javascript" src="/js/script_new_request.js"></script>
</body>
</html>