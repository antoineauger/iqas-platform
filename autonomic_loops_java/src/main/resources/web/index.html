<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>API gateway</title>
    <style>
        .code {
            font-family: monospace;
        }
    </style>
</head>
<body>
<h1>API gateway for the iQAS platform</h1>

<p> Welcome on the homepage of the API gateway. <br/>
    This API allows you to interact with the iQAS platform in order to subscribe to high-quality sensor observations.
</p>

<h2>GET endpoints</h2>
<ul>
    <li>/sensors</li>
    <li>/sensors/[sensor_id]</li><br/>

    <li>/requests</li>
    <li>/requests/[request_id]</li><br/>

    <!-- TODO
    <li>/places</li>
    <li>/places?near=[location]</li> -->

    <li>/topics</li>
    <li>/topics/[topic_URI]</li><br/>

    <li>/pipelines</li>
    <li>/pipelines?print=ids</li>
    <li>/pipelines/[pipeline_id]</li>
</ul>

<h2>POST endpoints</h2>
<ul>
    <li>/requests</li>
</ul>

For submitting a new request, the format is the following (all parameters are mandatory):<br/>
<div style="margin-left: 30px;" class="code">
    Content-Type: application/json<br/>
    {<br/>
    <div style="margin-left: 30px;">
        "request_id": "",<br/>
        "application_id": "[application_id]"<br/>
        "topic": (see below)<br/>
        "location": (see below)<br/>
        "sla_level": (see below)<br/>
        "operator": (see below)<br/>
    </div>
    }
</div>

<br/>
Topics: see topic list <a href="/topics">here</a><br/>
Location: city name (Toulouse, Portet-Sur-Garonne, etc.) <!-- TODO / (long,lat) / option nearBy --><br/>
Operators: <span class="code">NONE</span> / <span class="code">AVG</span> / <span class="code">MIN</span> / <span class="code">MAX</span><br/>
Service Level Agreement levels: <span class="code">BEST_EFFORT</span> / <span class="code">GUARANTEED</span>

<h2>DELETE endpoints</h2>
<ul>
    <li>/requests/[request_id]</li>
</ul>

<h2>Available QoO pipelines</h2>
<ul id="qoo_pipeline_list">

</ul>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script>
    $(function(){
        $.ajax({
            url: "/pipelines?print=ids",
            success: function( result ) {
                $.each(result, function(index, item) {
                    $( "#qoo_pipeline_list" ).append( "<li>" + item + "</li>" );
                });
            }
        });
    });
</script>
</body>
</html>